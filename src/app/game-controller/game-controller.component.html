<!-- Игра в процессе -->
<div *ngIf="isRunning">
  <app-scoreboard [score]="score" [highScore]="highScore"></app-scoreboard>
  <app-ground [running]="isRunning"></app-ground>
  <app-dino [isRunning]="isRunning"></app-dino>
  <app-obstacle [isRunning]="isRunning"></app-obstacle>
</div>

<!-- Форма после проигрыша -->
<div class="overlay" *ngIf="gameOver">
  <div class="panel">
    <h3>Game Over</h3>
    <p>Your score: {{ score }}</p>

    <form [formGroup]="resultForm" (ngSubmit)="saveResult()">
      <label>
        Player Name (required):
        <input formControlName="playerName">
        <span *ngIf="resultForm.get('playerName')?.invalid && resultForm.get('playerName')?.touched">
          Это поле обязательно
        </span>
      </label>

      <label>
        Score Limit (required + min 100):
        <input formControlName="scoreLimit" type="number" readonly>
        <span *ngIf="resultForm.get('scoreLimit')?.errors?.['required'] && resultForm.get('scoreLimit')?.touched">
          Обязательное поле
        </span>
        <span *ngIf="resultForm.get('scoreLimit')?.errors?.['min'] && resultForm.get('scoreLimit')?.touched">
          Минимальное значение 100
        </span>
      </label>

      <label>
        Level:
        <input formControlName="level" type="text">
      </label>

      <label>
        Notes:
        <textarea formControlName="notes"></textarea>
      </label>

      <!-- Вывод ошибки сервиса или проверки минимального результата -->
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

      <button type="submit">Save Result</button>
    </form>
  </div>
</div>

<!-- Кнопка старта игры -->
<div class="overlay" *ngIf="!isRunning && !gameOver">
  <button (click)="startGame()">Start Game</button>
</div>
